language: go
sudo: false
notifications:
  email: false
jobs:
  include:
    - go: 1.10.x
      stage: deploy
      go_import_path: github.com/xunchangguo/chartify
      install: skip
      script: skip
      before_deploy:
        - chmod +x ./hack/build-all.bash
        - ./hack/build-all.bash
      deploy:
        - provider: releases
          api_key:
            secure: "${secure}"
          file:
            - release/dep-linux-amd64
            - release/dep-linux-amd64.sha256
            - release/dep-windows-amd64.exe
            - release/dep-windows-amd64.exe.sha256
            - release/dep-linux-386
            - release/dep-linux-386.sha256
            - release/dep-windows-386.exe
            - release/dep-windows-386.exe.sha256
          skip_cleanup: true
          on:
            repo: xunchangguo/chartify
            branch: master
            tags: true
addons:
  ssh_known_hosts: github.com
